- provide(:title, 'Dashboard')

// Index page itself
= render 'layouts/navbar'
.dashboard-top
  %a{"data-toggle" => "tab", href: "#sectionA"} Crew
  %a{"data-toggle" => "tab", href: "#sectionB"} Projects
.dashboard-main
  .dashboard-main-screen
    // Dashboard tab
    .tab-content
      #sectionA.tab-pane.fade.in.active
        .dashboard-A-tab-left
          %button.btn.btn-default.btn-sm{"data-target" => "#crewModal", "data-toggle" => "modal", :type => "button"}
            Add new member
          %ul#crew-list.scrollable
            - @crews.each do |crew|
              = render partial: 'crews/crew_row', locals: {crew: crew}
          = render 'crews/crew_modal'
        .dashboard-A-tab-right.scrollable
          - @crews.each do |crew|
            %iframe{src: "#{crew_path(crew)}", height: '100%', width: '100%'}
      #sectionB.tab-pane.fade
        %button.btn.btn-default.btn-sm{"data-target" => "#projectModal", "data-toggle" => "modal", :type => "button"}
          Add new project
        %ul#project-list.scrollable
          - @projects.each do |project|
            = render partial: 'projects/project_row', locals: {project: project}
        = render 'projects/project_modal'
    // Dashboard tab
.dashboard-statistics
  %span Projects: #{@projects.count}
  %span Crew: #{@crews.count}
  .profit-font $ #{@project_budget}
  .loss-font $ #{@crew_rate} 
  - cl_vs_cr = Proc.new {(@project_budget) - (@crew_rate)}
  -if (@project_budget) > (@crew_rate)
    .profit $ #{cl_vs_cr.call}
  -else
    .loss $ #{cl_vs_cr.call}